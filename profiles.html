<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Social Practice - ManThor</title>
  <link rel="stylesheet" href="styles.css">
  <style>
    .profiles-container { max-width:1200px; margin:20px auto; padding:24px; }
    .profile-card { background:linear-gradient(135deg,rgba(26,26,26,0.95),rgba(20,20,20,0.95)); border:2px solid rgba(220,38,38,0.2); border-radius:16px; padding:24px; margin-bottom:24px; box-shadow:0 10px 40px rgba(0,0,0,0.6); }
    .profile-header { display:flex; align-items:center; gap:20px; margin-bottom:20px; padding-bottom:16px; border-bottom:2px solid rgba(220,38,38,0.2); }
    .profile-avatar { width:80px; height:80px; border-radius:50%; background:linear-gradient(135deg,#dc2626,#f97316); display:flex; align-items:center; justify-content:center; font-size:40px; }
    .profile-info h3 { color:#f97316; margin:0 0 8px 0; font-size:24px; }
    .profile-info p { color:#9ca3af; margin:0; font-size:14px; }
    .profile-section { margin:16px 0; }
    .profile-section h4 { color:#f97316; margin:0 0 8px 0; font-size:16px; font-weight:700; }
    .profile-section p { color:#d1d5db; line-height:1.6; font-size:14px; }
    .profile-tags { display:flex; flex-wrap:wrap; gap:8px; margin-top:8px; }
    .profile-tag { background:rgba(249,115,22,0.2); border:1px solid rgba(249,115,22,0.3); padding:6px 12px; border-radius:20px; color:#f97316; font-size:12px; font-weight:600; }
    .approach-box { background:rgba(34,197,94,0.1); border:1px solid rgba(34,197,94,0.3); padding:16px; border-radius:10px; margin-top:16px; }
    .approach-box h4 { color:#22c55e; margin:0 0 8px 0; font-size:14px; }
    .approach-box p { color:#d1d5db; margin:0; font-size:13px; line-height:1.6; font-style:italic; }
  </style>
</head>
<body>
  <div class="app-container">
    <header class="header">
      <div class="logo-container">
        <div class="viking-badge">
          <div class="flag-backdrop">ğŸ‡ºğŸ‡¸</div>
          <div class="viking-icon">ğŸ’¬</div>
        </div>
        <h1 class="app-title">Social Practice</h1>
      </div>
      <p class="hero-title">Profiles for Confidence Building</p>
    </header>

    <div class="profiles-container">
      <!-- Profile 1 -->
      <div class="profile-card">
        <div class="profile-header">
          <div class="profile-avatar">ğŸ‘©</div>
          <div class="profile-info">
            <h3>Jessica Rivera</h3>
            <p>28 years old â€¢ Professional & Active</p>
          </div>
        </div>
        
        <div class="profile-section">
          <h4>ğŸ’¼ Lifestyle</h4>
          <p>Marketing manager at a tech startup. Loves staying active with yoga and hiking on weekends. Values work-life balance and meaningful connections.</p>
          <div class="profile-tags">
            <span class="profile-tag">ğŸƒ Active</span>
            <span class="profile-tag">ğŸ¨ Creative</span>
            <span class="profile-tag">ğŸ“š Book Lover</span>
          </div>
        </div>

        <div class="profile-section">
          <h4>âœ¨ Personality</h4>
          <p>Outgoing and curious. Enjoys deep conversations about culture, psychology, and personal growth. Has a witty sense of humor and appreciates honesty. Loves indie music and art galleries.</p>
        </div>

        <div class="profile-section">
          <h4>ğŸ¯ Looking For</h4>
          <p>Seeking genuine emotional connection with someone who values communication and mutual respect. Open to exploring chemistry but prioritizes intellectual compatibility first.</p>
        </div>

        <div class="profile-section">
          <h4>ğŸµ Interests</h4>
          <p><strong>Music:</strong> Indie, Jazz, Alt-Rock â€¢ <strong>Hobbies:</strong> Photography, Cooking, Traveling â€¢ <strong>Movies:</strong> Psychological thrillers, documentaries</p>
        </div>

        <div class="approach-box">
          <h4>ğŸ’¡ Respectful Conversation Starter</h4>
          <p>"Hi Jessica! I noticed you're into indie music and photography. What's been inspiring your creative side lately?"</p>
        </div>
        
        <button onclick="openChat('Jessica Rivera', 'jessica')" style="width:100%;margin-top:16px;padding:14px;background:linear-gradient(135deg,#dc2626,#b91c1c);border:2px solid #f97316;border-radius:10px;color:#fff;font-size:16px;font-weight:700;cursor:pointer;transition:all 0.3s;">ğŸ’¬ Start Conversation</button>
      </div>

      <!-- Profile 2 -->
      <div class="profile-card">
        <div class="profile-header">
          <div class="profile-avatar">ğŸ‘±â€â™€ï¸</div>
          <div class="profile-info">
            <h3>Sophia Chen</h3>
            <p>34 years old â€¢ Entrepreneur & Confident</p>
          </div>
        </div>
        
        <div class="profile-section">
          <h4>ğŸ’¼ Lifestyle</h4>
          <p>Owns a boutique fitness studio. Early riser who values discipline and health. Enjoys wine tasting and weekend getaways to nature.</p>
          <div class="profile-tags">
            <span class="profile-tag">ğŸ’ª Fitness Enthusiast</span>
            <span class="profile-tag">ğŸ· Wine Lover</span>
            <span class="profile-tag">ğŸŒ Traveler</span>
          </div>
        </div>

        <div class="profile-section">
          <h4>âœ¨ Personality</h4>
          <p>Direct and confident. Appreciates ambition and maturity. Has a playful side but values substance over superficiality. Enjoys stimulating conversation and isn't afraid to be vulnerable.</p>
        </div>

        <div class="profile-section">
          <h4>ğŸ¯ Looking For</h4>
          <p>Seeking someone secure and emotionally intelligent. Open to both casual connection and deeper intimacy if there's strong chemistry. Values respect and clear communication.</p>
        </div>

        <div class="profile-section">
          <h4>ğŸµ Interests</h4>
          <p><strong>Music:</strong> R&B, Soul, Electronic â€¢ <strong>Hobbies:</strong> Pilates, Meditation, Cooking â€¢ <strong>Movies:</strong> Romance, Drama</p>
        </div>

        <div class="approach-box">
          <h4>ğŸ’¡ Respectful Conversation Starter</h4>
          <p>"Hi Sophia! Running your own fitness studio must be rewarding. What got you into the wellness world?"</p>
        </div>
        
        <button onclick="openChat('Sophia Chen', 'sophia')" style="width:100%;margin-top:16px;padding:14px;background:linear-gradient(135deg,#dc2626,#b91c1c);border:2px solid #f97316;border-radius:10px;color:#fff;font-size:16px;font-weight:700;cursor:pointer;transition:all 0.3s;">ğŸ’¬ Start Conversation</button>
      </div>

      <!-- Profile 3 -->
      <div class="profile-card">
        <div class="profile-header">
          <div class="profile-avatar">ğŸ‘©â€ğŸ¦°</div>
          <div class="profile-info">
            <h3>Emma Laurent</h3>
            <p>29 years old â€¢ Creative & Free-Spirited</p>
          </div>
        </div>
        
        <div class="profile-section">
          <h4>ğŸ’¼ Lifestyle</h4>
          <p>Freelance graphic designer with a passion for sustainable living. Loves exploring farmers markets and trying new plant-based recipes. Weekend warrior at music festivals.</p>
          <div class="profile-tags">
            <span class="profile-tag">ğŸ¨ Artist</span>
            <span class="profile-tag">ğŸŒ± Eco-Conscious</span>
            <span class="profile-tag">ğŸ¶ Festival Goer</span>
          </div>
        </div>

        <div class="profile-section">
          <h4>âœ¨ Personality</h4>
          <p>Warm and open-minded. Values authenticity and doesn't take life too seriously. Loves spontaneous adventures and meaningful late-night conversations. Appreciates humor and emotional depth.</p>
        </div>

        <div class="profile-section">
          <h4>ğŸ¯ Looking For</h4>
          <p>Looking for connection without pressure. Enjoys getting to know someone organically. Open to exploring chemistry and intimacy when there's mutual attraction and trust.</p>
        </div>

        <div class="profile-section">
          <h4>ğŸµ Interests</h4>
          <p><strong>Music:</strong> Folk, Electronic, Reggae â€¢ <strong>Hobbies:</strong> Painting, Yoga, Vintage Shopping â€¢ <strong>Movies:</strong> Indie films, Comedies</p>
        </div>

        <div class="approach-box">
          <h4>ğŸ’¡ Respectful Conversation Starter</h4>
          <p>"Hey Emma! Your design work sounds awesome. What's your creative process like when starting a new project?"</p>
        </div>
        
        <button onclick="openChat('Emma Laurent', 'emma')" style="width:100%;margin-top:16px;padding:14px;background:linear-gradient(135deg,#dc2626,#b91c1c);border:2px solid #f97316;border-radius:10px;color:#fff;font-size:16px;font-weight:700;cursor:pointer;transition:all 0.3s;">ğŸ’¬ Start Conversation</button>
      </div>

      <!-- Profile 4 -->
      <div class="profile-card">
        <div class="profile-header">
          <div class="profile-avatar">ğŸ‘©â€ğŸ’¼</div>
          <div class="profile-info">
            <h3>Maya Patel</h3>
            <p>41 years old â€¢ Professional & Sophisticated</p>
          </div>
        </div>
        
        <div class="profile-section">
          <h4>ğŸ’¼ Lifestyle</h4>
          <p>Senior consultant in finance. Enjoys fine dining, theater, and weekend spa retreats. Values quality time and intellectual stimulation. Recently divorced and rediscovering herself.</p>
          <div class="profile-tags">
            <span class="profile-tag">ğŸ½ï¸ Foodie</span>
            <span class="profile-tag">ğŸ­ Culture Enthusiast</span>
            <span class="profile-tag">ğŸ“– Well-Read</span>
          </div>
        </div>

        <div class="profile-section">
          <h4>âœ¨ Personality</h4>
          <p>Sophisticated and discerning. Appreciates maturity and emotional intelligence. Has a reserved exterior but opens up with the right person. Values honesty and directness.</p>
        </div>

        <div class="profile-section">
          <h4>ğŸ¯ Looking For</h4>
          <p>Seeking mature companionship and connection. Open to exploring physical chemistry but wants emotional compatibility first. Values discretion and respect above all.</p>
        </div>

        <div class="profile-section">
          <h4>ğŸµ Interests</h4>
          <p><strong>Music:</strong> Classical, Jazz, Opera â€¢ <strong>Hobbies:</strong> Wine Collecting, Reading, Travel â€¢ <strong>Movies:</strong> Classic films, Foreign cinema</p>
        </div>

        <div class="approach-box">
          <h4>ğŸ’¡ Respectful Conversation Starter</h4>
          <p>"Hello Maya! I see you appreciate fine dining and theater. What's been your favorite cultural experience recently?"</p>
        </div>
        
        <button onclick="openChat('Maya Patel', 'maya')" style="width:100%;margin-top:16px;padding:14px;background:linear-gradient(135deg,#dc2626,#b91c1c);border:2px solid #f97316;border-radius:10px;color:#fff;font-size:16px;font-weight:700;cursor:pointer;transition:all 0.3s;">ğŸ’¬ Start Conversation</button>
      </div>

      <div style="margin-top:32px;padding:20px;background:rgba(34,197,94,0.1);border:1px solid rgba(34,197,94,0.3);border-radius:12px;">
        <h3 style="color:#22c55e;margin:0 0 12px 0;">ğŸ’š Practice Tips</h3>
        <ul style="color:#d1d5db;font-size:14px;line-height:1.8;margin:0;">
          <li><strong>Be Genuine:</strong> Authenticity builds real connections</li>
          <li><strong>Show Interest:</strong> Ask thoughtful questions about their interests</li>
          <li><strong>Respect Boundaries:</strong> Always prioritize consent and comfort</li>
          <li><strong>Listen Actively:</strong> Pay attention to what they share</li>
          <li><strong>Be Patient:</strong> Real chemistry and trust take time</li>
          <li><strong>Communicate Clearly:</strong> Express your intentions honestly</li>
        </ul>
      </div>

      <div style="text-align:center;margin-top:24px;">
        <a href="index.html" style="display:inline-block;padding:14px 32px;background:linear-gradient(135deg,#dc2626,#b91c1c);border:2px solid #f97316;border-radius:10px;color:#fff;font-size:16px;font-weight:700;text-decoration:none;text-transform:uppercase;letter-spacing:1px;">â† Back to Main</a>
      </div>
    </div>
  </div>

  <!-- Chat Modal -->
  <div id="chatModal" style="display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.9);z-index:9999;overflow:auto;">
    <div style="max-width:800px;margin:20px auto;background:linear-gradient(135deg,rgba(26,26,26,0.98),rgba(20,20,20,0.98));border:2px solid #f97316;border-radius:16px;box-shadow:0 20px 60px rgba(0,0,0,0.8);">
      <div style="padding:20px;border-bottom:2px solid rgba(220,38,38,0.2);display:flex;justify-content:space-between;align-items:center;">
        <div>
          <h2 id="chatName" style="color:#f97316;margin:0;font-size:24px;"></h2>
          <p style="color:#9ca3af;margin:4px 0 0 0;font-size:13px;">AI Practice Conversation</p>
        </div>
        <button onclick="closeChat()" style="background:transparent;border:2px solid #dc2626;color:#dc2626;padding:8px 16px;border-radius:8px;cursor:pointer;font-weight:700;">âœ• Close</button>
      </div>
      
      <div id="chatMessages" style="height:400px;overflow-y:auto;padding:20px;"></div>
      
      <div style="padding:20px;border-top:2px solid rgba(220,38,38,0.2);">
        <div style="display:flex;gap:12px;">
          <input id="userMessage" type="text" placeholder="Type your message..." style="flex:1;padding:12px;background:rgba(10,10,10,0.8);border:2px solid rgba(220,38,38,0.3);border-radius:8px;color:#fff;font-size:15px;" onkeypress="if(event.key==='Enter') sendMessage()">
          <button onclick="sendMessage()" style="padding:12px 24px;background:linear-gradient(135deg,#dc2626,#b91c1c);border:2px solid #f97316;border-radius:8px;color:#fff;font-weight:700;cursor:pointer;">Send</button>
        </div>
        <p style="color:#9ca3af;font-size:12px;margin:8px 0 0 0;text-align:center;">ğŸ’¡ Practice respectful flirting and build confidence</p>
      </div>
    </div>
  </div>

  <script>
    let currentProfile = null;
    let chatHistory = [];

    const profiles = {
      jessica: {
        name: 'Jessica Rivera',
        personality: 'outgoing, witty, creative, loves deep conversations',
        interests: 'indie music, photography, psychology, art',
        style: 'playful yet thoughtful, appreciates humor and intelligence'
      },
      sophia: {
        name: 'Sophia Chen',
        personality: 'confident, direct, playful, values substance',
        interests: 'fitness, wine, travel, wellness',
        style: 'straightforward but warm, appreciates ambition'
      },
      emma: {
        name: 'Emma Laurent',
        personality: 'warm, free-spirited, authentic, spontaneous',
        interests: 'art, festivals, sustainable living, yoga',
        style: 'easygoing and open, loves meaningful connection'
      },
      maya: {
        name: 'Maya Patel',
        personality: 'sophisticated, reserved but opens up, values maturity',
        interests: 'fine dining, theater, wine, culture',
        style: 'elegant and discerning, appreciates depth'
      }
    };

    function openChat(name, profileId) {
      currentProfile = profiles[profileId];
      chatHistory = [];
      document.getElementById('chatModal').style.display = 'block';
      document.getElementById('chatName').textContent = name;
      document.getElementById('chatMessages').innerHTML = `
        <div style="background:rgba(220,38,38,0.1);padding:12px 16px;border-radius:10px;margin-bottom:12px;border-left:4px solid #f97316;">
          <p style="color:#d1d5db;margin:0;font-size:14px;"><strong style="color:#f97316;">${name}:</strong> Hey! Thanks for reaching out ğŸ˜Š What caught your attention?</p>
        </div>
      `;
      document.getElementById('userMessage').focus();
    }

    function closeChat() {
      document.getElementById('chatModal').style.display = 'none';
      currentProfile = null;
      chatHistory = [];
    }

    async function sendMessage() {
      const input = document.getElementById('userMessage');
      const message = input.value.trim();
      
      if (!message || !currentProfile) return;
      
      // Add user message
      const messagesDiv = document.getElementById('chatMessages');
      messagesDiv.innerHTML += `
        <div style="background:rgba(34,197,94,0.1);padding:12px 16px;border-radius:10px;margin-bottom:12px;border-left:4px solid #22c55e;text-align:right;">
          <p style="color:#d1d5db;margin:0;font-size:14px;"><strong style="color:#22c55e;">You:</strong> ${escapeHtml(message)}</p>
        </div>
      `;
      
      chatHistory.push({ role: 'user', content: message });
      input.value = '';
      
      // Show typing indicator
      messagesDiv.innerHTML += `
        <div id="typing-indicator" style="background:rgba(220,38,38,0.1);padding:12px 16px;border-radius:10px;margin-bottom:12px;border-left:4px solid #f97316;">
          <p style="color:#9ca3af;margin:0;font-size:14px;"><em>${currentProfile.name} is typing...</em></p>
        </div>
      `;
      messagesDiv.scrollTop = messagesDiv.scrollHeight;
      
      // Generate AI response using OpenAI
      try {
        const response = await generateAIResponse(message);
        
        // Remove typing indicator
        const typingIndicator = document.getElementById('typing-indicator');
        if (typingIndicator) typingIndicator.remove();
        
        messagesDiv.innerHTML += `
          <div style="background:rgba(220,38,38,0.1);padding:12px 16px;border-radius:10px;margin-bottom:12px;border-left:4px solid #f97316;">
            <p style="color:#d1d5db;margin:0;font-size:14px;"><strong style="color:#f97316;">${currentProfile.name}:</strong> ${escapeHtml(response)}</p>
          </div>
        `;
        chatHistory.push({ role: 'assistant', content: response });
        messagesDiv.scrollTop = messagesDiv.scrollHeight;
      } catch (error) {
        console.error('AI response error:', error);
        // Show error message
        const typingIndicator = document.getElementById('typing-indicator');
        if (typingIndicator) typingIndicator.remove();
        
        messagesDiv.innerHTML += `
          <div style="background:rgba(220,38,38,0.2);padding:12px 16px;border-radius:10px;margin-bottom:12px;border:2px solid #dc2626;">
            <p style="color:#dc2626;margin:0;font-size:14px;"><strong>Error:</strong> ${escapeHtml(error.message || 'Could not connect to AI. Please try again.')}</p>
          </div>
        `;
        messagesDiv.scrollTop = messagesDiv.scrollHeight;
      }
    }

    async function generateAIResponse(userMessage) {
      const profile = currentProfile;
      
      // Build conversation history for context
      const messages = [
        {
          role: 'system',
          content: `You are ${profile.name}, a woman with the following characteristics:
- Personality: ${profile.personality}
- Interests: ${profile.interests}
- Style: ${profile.style}

You're having a flirty, engaging conversation. Be playful, warm, and show interest in getting to know the other person. Use emojis naturally. Keep responses conversational (2-3 sentences max). Balance being receptive with maintaining some mystery. You're open to connection but not too easy. Be authentic and respond naturally to what they say.`
        },
        ...chatHistory.slice(-6) // Last 3 exchanges for context
      ];
      
      // Call backend API (no API key needed from user)
      const response = await fetch('/api/chat', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({ messages })
      });
      
      if (!response.ok) {
        const errorData = await response.json().catch(() => ({}));
        throw new Error(errorData.error || `API request failed with status ${response.status}`);
      }
      
      const data = await response.json();
      return data.message;
    }

    function escapeHtml(text) {
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }
  </script>
</body>
</html>
